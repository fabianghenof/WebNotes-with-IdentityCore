$(document).ready(function(){function e(){$("#new-note-form").toggleClass("hidden")}function o(n){n.closest("#note-panel").prev().toggleClass("hidden")}function s(){var n=new Note;t.val()?(r.val()||r.val("WebNote"),t.removeClass("alert-danger"),n.title=r.val(),n.content=t.val(),n.color=i,r.val(""),t.val(""),$.post("saveNote",n).then(function(t){n.id=t.id;h(n);toastr.success("WebNote added!")})):(t.addClass("alert-danger"),toastr.warning("WebNote content empty!"))}function h(n){var t=$($("#to-do-item-template").html());t.find(".note-title").text(n.title);t.find("#panel-note-content").text(n.content);t.find(".delete-note-button").data("id",n.id);t.find("#panel-note-content").data("id",n.id);t.find("#note-panel").data("id",n.id);t.find("#note-panel").data("orderIndex",n.orderIndex);t.addClass(i);$("#notes-div").prepend(t)}function c(n){event.preventDefault();var t=n.closest(".delete-note-button").data("id");$.post("deleteNote",{id:t}).then(function(){n.closest("#note-panel").fadeOut("fast",function(){n.closest("#note-panel").remove();toastr.error("WebNote "+t+" deleted")})})}function f(t){switch(t){case"green":u.text("Green");n.removeClass("btn-success btn-info btn-warning btn-danger");n.addClass("btn-success");i="panel-success";break;case"red":u.text("Red");n.removeClass("btn-success btn-info btn-warning btn-danger");n.addClass("btn-danger");i="panel-danger";break;case"orange":u.text("Orange");n.removeClass("btn-success btn-info btn-warning btn-danger");n.addClass("btn-warning");i="panel-warning";break;case"blue":u.text("Blue");n.removeClass("btn-success btn-info btn-warning btn-danger");n.addClass("btn-info");i="panel-info"}}function l(n){var t=n.find(".note-title").text();n.find(".note-title").addClass("hidden");n.find("#move-up-symbol").addClass("hidden");n.find("#move-down-symbol").addClass("hidden");n.find("#delete-note-symbol").addClass("hidden");n.find("#edit-title-input").removeClass("hidden");n.find("#edit-title-input").focus();n.find("#edit-title-input").val(t)}function a(n){var t=n.find("#edit-title-input").val(),i=n.find(".delete-note-button").data("id");n.find(".note-title").removeClass("hidden");n.find("#move-up-symbol").removeClass("hidden");n.find("#move-down-symbol").removeClass("hidden");n.find("#delete-note-symbol").removeClass("hidden");n.find("#edit-title-input").addClass("hidden");n.find(".note-title").text(t);$.post("updateNoteTitle",{id:i,title:t}).then(function(){toastr.success("WebNote title modified!")})}function v(n){var t=n.find("#panel-note-content").text();n.find("#panel-note-content").addClass("hidden");n.parent().find("#move-up-symbol").addClass("hidden");n.parent().find("#move-down-symbol").addClass("hidden");n.parent().find("#delete-note-symbol").addClass("hidden");n.find("#edit-content-input").removeClass("hidden");n.find("#edit-content-input").focus();n.find("#edit-content-input").val(t)}function y(n){var t=n.find("#edit-content-input").val(),i=n.data("id");n.find("#panel-note-content").removeClass("hidden");n.parent().find("#move-up-symbol").removeClass("hidden");n.parent().find("#move-down-symbol").removeClass("hidden");n.parent().find("#delete-note-symbol").removeClass("hidden");n.find("#edit-content-input").addClass("hidden");n.find("#panel-note-content").text(t);$.post("updateNoteContent",{id:i,content:t}).then(function(){toastr.success("WebNote content modified!")})}function p(n){var t=n.closest("#note-panel").data("id"),i=n.closest("#note-panel").prev().data("id");$.post("moveNoteUp",{idOfClickedNote:t,idOfAboveNote:i}).then(function(){location.reload()})}function w(n){var t=n.closest("#note-panel").data("id"),i=n.closest("#note-panel").next().data("id");$.post("moveNoteDown",{idOfClickedNote:t,idOfBelowNote:i}).then(function(){location.reload()})}function b(n){var t=n.prev().val(),i=n.data("id");$.post("/sendEmail",{email:t,id:i}).then(location.reload())}var r=$("#note-title"),t=$("#note-content"),n=$("#color-button"),u=$("#color-button-text"),i="panel-success",k=localStorage.getItem("justDeletedNote");$("#add-note-btn").on("click",e);$("#submit-note-btn").on("click",s);t.on("keypress",function(){t.removeClass("alert-danger")});$("#notes-div").on("click","#delete-note-symbol",function(n){n.stopPropagation();c($(this))});$("#selected-green").on("click",function(){f("green")});$("#selected-blue").on("click",function(){f("blue")});$("#selected-orange").on("click",function(){f("orange")});$("#selected-red").on("click",function(){f("red")});$("#notes-div").on("click",".panel-heading",function(){l($(this))});$("#notes-div").on("focusout",".panel-heading",function(){a($(this))});$("#notes-div").on("click",".panel-body",function(){v($(this))});$("#notes-div").on("focusout",".panel-body",function(){y($(this))});$("#notes-div").on("click","#move-up-symbol",function(n){n.stopPropagation();p($(this))});$("#notes-div").on("click","#move-down-symbol",function(n){n.stopPropagation();w($(this))});$("#notes-div").on("click","#email-note-symbol",function(n){n.stopPropagation();o($(this))});$("#notes-div").on("click","#email-note-button",function(n){n.stopPropagation();b($(this))})});